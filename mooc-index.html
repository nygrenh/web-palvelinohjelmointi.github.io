<!DOCTYPE html>
<html>
    <head>
        <title>Web-palvelinohjelmointi</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="js/libs/syntaxhighlight/css/sh_style.css"/>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
        <link rel="stylesheet" href="css/chartist.min.css"/>
        <link rel="stylesheet" href="css/wepa.css"/>

        <link rel="stylesheet" href="css/wepa-mooc.css"/>

    </head>
    <body>

        <!-- BEGIN NAV -->
        <header role="navigation">
            <h1>
                <button type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>

                <a href="http://www.mooc.fi" class="hidden-in-hy">&#171; mooc.fi</a>
		
            </h1>
            <nav class="collapse bs-navbar-collapse" role="navigation">
                <ul>
                    <li>
                        <a href="#start">Yleistä</a>
                    </li>
                    <li>
                        <a href="#viikko1">Viikko 1</a>
                    </li>
<!--
                    <li>
                        <a href="#viikko2">Viikko 2</a>
                    </li>
                    <li>
                        <a href="#viikko3">Viikko 3</a>
                    </li>
                    <li>
                        <a href="#viikko4">Viikko 4</a>
                    </li>
                    <li>
                        <a href="#viikko5">Viikko 5</a>
                    </li>
                    <li>
                        <a href="#viikko6">Viikko 6</a>
                    </li>
                    <li>
                        <a href="#viikko7">Viikko 7</a>
                    </li>
-->
                </ul>

		<div style="direction: rtl;">
		  <button id="logout" class="btn btn-warning">Kirjaudu ulos</button>
		</div>
            </nav>
	    
        </header>
        <!-- // END NAV -->
        <article>


          <div class="modal fade" id="tmcAuthModal" data-backdrop="static" data-keyboard="false"  tabindex="-1" role="dialog" aria-labelledby="tmcAuthModalLabel" aria-hidden="true">
            <div class="modal-dialog">
              <form class="form-inline"  id="TmcLoginForm" role="form">
		<div class="modal-content">
                  <div class="modal-header">
                    <h4 class="modal-title" id="tmcAuthModalLabel">Kirjoita TMC-tunnuksesi</h4>
                  </div>
                  <div class="modal-body">
                    <p>Pyydämme sinua kirjautumaan TMC-tunnuksillasi materiaaliin. Kirjautumistietoja käytetään oppimateriaalin käytön tutkimukseen.</p>
                    <div id="tmc-account-wrong-alert" class="hidden alert alert-danger">Tarkista TMC-tunnuksesi</div>
                    <div class="form-group">
                      <label class="sr-only" for="exampleInputPassword2">TMC-tunnus</label>
                      <input type="text" name="tmcAccountName" class="form-control" id="inputTmcAccount" placeholder="TMC-tunnus">
                    </div>
                  </div>
                  <div class="modal-footer">
                    <button type="button" id="tmcAccountNOACCOUNT" class="btn btn-default" data-dismiss="modal">En halua</button>
                    <button type="submit" name="tmcLoginButton" id="tmcAccountOK" class="btn btn-primary">OK</button>
                  </div>
		</div><!-- /.modal-content -->
              </form>
            </div><!-- /.modal-dialog -->
          </div><!-- /.modal -->
	  

            <section id="intro" class="no-toc weeklimit" data-week-id="-1">Huom! Jos etsit syksyllä 2014 julkaistua web-palvelinohjelmoinnin oppimateriaalia, löytyy se <a href="s2014-wepa.html">täältä</a>. Syksyn 2015 web-palvelinohjelmointikurssi löytyy taas <a href="s2015-wepa.html">täältä</a>. Edessäsi on palvelinohjelmoinnin MOOCia varten toteutettu kurssimateriaali.</section>



            <!-- BEGIN INDEX -->
            <section id="intro" class="no-toc weeklimit" data-week-id="0">
                
                <header>

                    <div class="intro-header-img"></div>

                    <h1>Web-palvelinohjelmointi</h1>

                    <p>Voinko oppia tekemään Facebookin, Flickrin tai Twitterin?</p>

                    <a class="call-to-action" href="#start" role="button">No todellakin!</a>
		    
                </header>

                <h1 id="start">Sisältö, aikataulu, arvostelu</h1>

                <p>Kurssilla tutustutaan nykyaikaisten, skaalautuvien ja virheenkestävien web-sovellusten toteuttamiseen, testaamiseen ja julkaisemiseen. Kurssilla keskitytään palvelinpuolen toiminnallisuuden toteuttamiseen. Selainpuolen toiminnallisuudella on kurssilla vain pieni paino. Kurssin opetuskieli on suomi ja ohjelmointikieli Java.</p>

		<p>Kurssi aloitetaan tutustumalla web-sovellusten toimintaan <a href="http://sparkjava.com/" target="_blank">Spark</a>-sovelluskehyksen avulla, jonka jälkeen syvennytään hieman suurempiin sovelluksiin ja niiden toteuttamiseen <a href="http://spring.io/" target="_blank">Spring</a>-sovelluskehyksen kautta.</p>

                <p>Kurssi sisältää seitsemän tehtäväsarjaa, joista ensimmäinen julkaistaan 5. marraskuuta 2015. Uusia tehtäväsarjoja julkaistaan noin kahden viikon välein -- odotamme <a href="https://github.com/spring-projects/spring-boot/milestones" target="_blank">Spring Boot 1.3</a>:n virallista julkaisua. Seuraavaan tehtäväsarjaan eteneminen vaatii sen, että tekee vähintään 80% edeltävästä tehtäväsetistä.</p>

                <p><a class="jump" href="#viikoittaiset-teemat" role="button">Viikoittaiset teemat &raquo;</a></p>

                <h2>Opettajille ja opiskelijoille</h2>

                <p>Kurssi vastaa <a href="http://www.cs.helsinki.fi/home/" target="_blank">Helsingin yliopiston tietojenkäsittelytieteen laitoksen</a> kurssia <a href="http://www.cs.helsinki.fi/en/courses/582353" target="_blank">Web-palvelinohjelmointi</a> (5 opintopistettä). Kurssia ja sen materiaalia saa käyttää ja muokata vapaasti, kunhan noudattaa materiaalin alalaidassa olevaa <a href="#license">lisenssiä</a>.</p>

                <p>Jos olet opettaja ja järjestät kurssista kokeen omassa oppilaitoksessasi, saat tarvittaessa osoitteesta <a href="mailto:mooc@cs.helsinki.fi">mooc@cs.helsinki.fi</a> koepohjan. Autamme myös tarvittaessa kokeen korjaamisessa.</p>

                <p>Jos olet opiskelijana jossain muualla kuin Helsingin yliopistolla ja haluaisit suorittaa kurssin siten, että saat suoritusmerkinnän tai opintopisteet omassa oppilaitoksessasi, etsi omasta oppilaitoksestasi opettaja tai opinto-ohjaaja, joka on valmis valvomaan kokeen ja hyväksymään kurssisuorituksen.</p>

		<h2>Arvostelu</h2>
		
                <p>Kurssin arvostelu -- Helsingin yliopistossa kurssin suorittavilla opiskelijoilla -- perustuu harjoitustehtäviin sekä kahteen kokeeseen. Toinen kokeista tehdään kynällä ja paperilla, ja toinen tietokoneella. Kurssin pisteytys on seuraava:</p>
		
		<ul>
		  <li>Viikoittaisista tehtäväsarjoista saa 100 pistettä viikkoa kohti. Täydet 100 pistettä saa tekemällä 100% viikon tehtävistä. Jos tekee puolet tehtävistä, saa 50 pistettä jne. </li>
		  <li>Paperilla tehtävästä kokeesta on mahdollista saada 250 pistettä.</li>
		  <li>Tietokoneella tehtävästä kokeesta on mahdollista saada 250 pistettä.</li>
		</ul>

		<p>Kurssista voi saada yhteensä 1200 pistettä. Sekä paperilla ja kynällä että tietokoneella tehtävistä kokeista on kummastakin saatava vähintään puolet mahdollisista pisteistä kurssin läpäisemiseen. Kurssin arvosanarajat ovat seuraavat:</p>

		<ul>
		  <li>700 -> 1</li>
		  <li>800 -> 2</li>
		  <li>900 -> 3</li>
		  <li>1000 -> 4</li>
		  <li>1100 -> 5</li>
		</ul>

		<p>Paikallisen oppilaitoksen opettaja voi päättää myös toisenlaisen arvostelun.</p>


                <h1>Esitietovaatimukset ja kurssin suorittaminen</h1>

                <p>Kurssilla oletetaan Java-ohjelmointikielen tuntemus kurssien ohjelmoinnin perusteet ja ohjelmoinnin jatkokurssi laajuudessa (vastaa <a href="http://mooc.fi/" target="_blank">mooc.fi</a>-osoitteessa olevaa kurssia <em>OhjelmointiMOOC</em>. Tämän lisäksi oletetaan, että osallistuja tuntee Helsingin yliopistolla järjestettävien kurssien <a href="http://tietokantojen-perusteet.github.io/" target="_blank">Tietokantojen perusteet</a>, <a href="https://github.com/mluukkai/OTM2015/wiki/Ohjelmistotekniikan-menetelmat" target="_blank">Ohjelmistotekniikan menetelmät</a> ja <a href="http://web-selainohjelmointi.github.io" target="_blank">Web-selainohjelmointi</a> aihepiirin oleellisilta osin -- tai, että osaajalla on muuta kautta tarvittava osaaminen.</p>
		
		<p>Omatoimisesta tiedon hakemisesta sekä omista harjoitusprojekteista on huomattavasti apua. Omatoiminen tiedon hakeminen sekä sen harjoittelu on välttämätöntä tällä kurssilla menestymiseen.</p>


		<h2>Tehtävien tekeminen ja palauttaminen</h2>


		<p>Kurssin tehtävien tekemisessä hyödynnetään Helsingin yliopiston tietojenkäsittelytieteen laitoksellä kehitettyä <a href="http://testmycode.github.io/" target="_blank">Test My Code</a>-palvelua, joka mm. tarjoaa ohjelmointiympäristöön liitettävän TMC-liitännäisen. Kurssitehtävät noudetaan paikalliselle koneelle TMC-liitännäisen avulla. TMC mahdollistaa myös tehtävien suoraviivaisen palauttamisen tehtäväpalvelimelle. Osa kurssin tehtävistä tarkastetaan automaattisesti TMC-palvelun avulla -- muiden tehtävien toiminta tulee taas tarkastaa itse erilaisten tukimateriaalien kuten kuvien avulla.</p>

		<p>Kurssilla käytettävä TMC-palvelin löytyy osoitteessa <a href="http://tmc.mooc.fi/mooc" target="_blank">http://tmc.mooc.fi/mooc</a>, kurssin nimenä on <code>2015-16-wepa-mooc</code>.</p>

		<p>Alkutoimet kurssilla käytettävien työvälineiden asentamiseen löytyy osoitteesta <a href="http://mooc.fi/courses/general/ohjelmointi/" target="_blank">http://mooc.fi/courses/general/ohjelmointi/</a>. Huom! Tämän kurssin nimenä TMC:ssä on <code>2015-16-wepa-mooc</code>.</p>


                <h2>Kurssin tukimuodot</h2>
		
		<p>Kurssilla käytetään <code>#mooc.fi</code> IRC-kanavaa, josta löytyy muita kurssilaisia. Muiden auttaminen kanavalla on vapaaehtoista, mutta luonnollisesti suositeltavaa. Auttamisesta hyötyy apua tarvitsevan lisäksi myös auttaja.</p>

		<p>Ohjeet IRC:n käyttöön löytyvät <a href="http://mooc.fi/courses/general/ohjelmointi/tukikanavat/irc/ohjeet/" target="_blank">tämän linkin takaa</a> -- tällä hetkellä muita tukikanavia ei ole suunnitteilla.</p>


                <h1 id="viikoittaiset-teemat">Viikoittaiset teemat</h1>

                <ul id="week-toc">
                  <li><a href="#viikko1">Viikko 1</a> Johdanto web-sovellusten tekemiseen.</li>
		</ul>

		<p>Teemalistausta täydennetään kurssin edetessä.</p>

                <h1>Sisällysluettelo</h1>

                <ul class="nav" id="material-toc"></ul>

                <h1>Tehtävät</h1>

                <ul class="nav nav-pills nav-pills-fixed-width" id="tehtavat-toc"></ul>

            </section>
            <!-- END INDEX -->

            <!-- BEGIN WEEK1 -->
            <section class="weeklimit" data-week-id="1">

                <header>
                    <h1 id="viikko1">Viikko 1</h1>
                </header>

                <h1>Web-sovellusten alkeet</h1>

                <p>Web-sovellukset koostuvat selain- ja palvelinpuolesta. Käyttäjän koneella toimii selainohjelmisto (esim. <a href="http://chrome.google.com" target="_blank">Google Chrome</a>), jonka kautta käyttäjä tekee pyyntöjä verkossa sijaitsevalle palvelimelle. Kun palvelin vastaanottaa pyynnön, se käsittelee pyynnön ja rakentaa vastauksen. Vastaus voi sisältää esimerkiksi web-sivun HTML-koodia tai jossain muussa muodossa olevaa tietoa.</p>

                <div class="image">
                    <img src="img/pyynto.png"/>
                    <div>Web-sovellusten käyttäminen: (1) käyttäjä klikkaa linkkiä, (2) selain tekee pyynnön palvelimelle, (3) palvelin käsittelee pyynnön ja rakentaa vastauksen, (4) selaimen tekemään pyyntöön palautetaan vastaus, (5) vastauksen näyttäminen käyttäjälle -- ei tässä kuvassa.</div>
                </div>

                <p>Selainohjelmointiin ja käyttöliittymäpuoleen keskityttäessä painotetaan rakenteen, ulkoasun, ja toiminnallisuuden erottamista toisistaan. Karkeasti voidaan sanoa, että selaimessa näkyvän sivun rakenne määritellään <a href="http://en.wikipedia.org/wiki/HTML" target="_blank">HTML</a>-tiedostoilla, ulkoasu <a href="http://en.wikipedia.org/wiki/CSS" target="_blank">CSS</a>-tiedostoilla, ja toiminnallisuus <a href="http://en.wikipedia.org/wiki/JavaScript" target="_blank">JavaScript</a>-tiedostoilla.</p>

                <p>Palvelinpuolen toiminnallisuutta toteutettaessa keskitytään tyypillisesti selainohjelmiston tarvitsevan "APIn" suunnitteluun ja toteutukseen, sivujen muodostamiseen selainohjelmistoa varten, datan tallentamiseen ja käsittelyyn, sekä sellaisten laskentaoperaatioiden toteuttamiseen, joita selainohjelmistossa ei kannata tai voida tehdä.</p>


		<h2>Ensimmäinen palvelinohjelmisto</h2>

		<p>Käytämme kurssin alkupuolella Javalla toteutettua <a href="http://sparkjava.com/" target="_blank">Spark</a> -kirjastoa web-sovellusten tekemiseen. Sparkin avulla web-sovellusten teko perustuu valmiiden kirjastometodien käyttöön. Niitä kutsumalla määritellään (1) mihin osoitteeseen tulevat pyynnöt käsitellään tässä metodissa, ja (2) mitä pyynnölle tulee tehdä.</p>

		<aside class="info">

		  <br/>

		  <h1>Maven</h1>

		  <p>Käytämme tällä kurssilla <a href="https://maven.apache.org/" target="_blank">Maven</a>ia valmiiden kirjastojen noutamiseen sekä projektien hallintaan. Tämän takia projektimme on luotu Maven-projekteina -- uuden Maven-projektin luominen onnistuu NetBeansissa valitsemalla File -&gt; New Project -&gt; Maven -&gt; Java Application.</p>

		  <p>Maven-projektin riippuvuudet määritellään projektiin liittyvässä (Project Files) <code>pom.xml</code>-tiedostossa olevassa <code>dependencies</code>-osiossa.</p>

		</aside>

		<p>Spark-kirjaston saa käyttöön lisäämällä Maven-projektiin seuraavan riippuvuuden.</p>

<pre class="sh_xml">
&lt;dependency&gt;
    &lt;groupId&gt;com.sparkjava&lt;/groupId&gt;
    &lt;artifactId&gt;spark-core&lt;/artifactId&gt;
    &lt;version&gt;2.3&lt;/version&gt;
&lt;/dependency&gt;
</pre>

		<p>Kun riippuvuus on lisätty projektiin ja projektista pääsee käsiksi Spark-kirjaston metodeihin ja luokkiin, on palvelinohjelmiston toteutus melko suoraviivaista. Yksinkertaisimmillaan "Hei Maailma!" -tekstin käyttäjälle palauttava sovellus on seuraavanlainen:</p>

<pre class="sh_java">
import static spark.Spark.*;

public class HeiMaailma {
    public static void main(String[] args) {
        get("*", (req, res) -&gt; "Hei Maailma!");
    }
}
</pre>

		<p>Yllä olevassa esimerkissä käytetään <code>spark</code>-pakkauksessa olevan <code>Spark</code>-luokan staattista metodia <code>get</code>, jolle määritellään kuunneltava osoite -- tässä kaikki <code>"*"</code> -- sekä palvelinohjelmiston pyyntöön palauttama vastaus. Lauseke <code>(req, res) -&gt; "Hei Maailma!"</code> palauttaa palvelimelle tulevaan pyyntöön merkkijonon <code>"Hei Maailma!"</code>. Tässä hyödynnetään Java 8:n mukana tulleita uusia ominaisuuksia -- Java 7:llä edelläoleva toteutus olisi näyttänyt seuraavalta:</p>

<pre class="sh_java">
import spark.Request;
import spark.Response;
import spark.Route;
import static spark.Spark.*;

public class HeiMaailma {
    public static void main(String[] args) {
        get("*", new Route() {
            @Override
            public Object handle(Request req, Response res) throws Exception {
                return "Hei Maailma!";
            }
        });
    }
}
</pre>

		<p>Tällä kurssilla tulee käyttää Javan versiota 8.</p>
		
		<aside class="info">
		  <br/>
		  <h1>Tehtävien tekeminen</h1>
		  
                  <p>Tästä eteenpäin materiaalissa on myös ohjelmointitehtäviä. Tehtävien tekeminen ja palautus tapahtuu NetBeans-ympäristössä Test My Code-liitännäisen avulla. Test My Code lataa tehtäväpohjat sinulle valmiiksi.</p>
		  
		  <p>Oletamme, että olet seurannut kurssin työvälineiden hakemiseen liittyviä ohjeita osoitteessa <a href="http://mooc.fi/courses/general/ohjelmointi/" target="_blank">http://mooc.fi/courses/general/ohjelmointi/</a>.</p>
		  
		  <p>Saat tehtävän auki klikkaamalla sen nimeä.</p>

		</aside>
		
                <div class="tehtavat">
		  
                  <div class="tehtava" id="t-helloweb-ex">
		    
                    <header>
                      <h1>
                        <a data-toggle="collapse" class="collapsed" href="#t-helloweb">
                          Hello World!
                        </a>
                      </h1>
                    </header>
		    
                    <div id="t-helloweb" class="collapse">
		      
                      <p>Kuten huomattava osa ohjelmointikursseista, tämäkin kurssi alkaa tehtävällä, jossa toteutettava ohjelma kirjoittaa tekstin <code>Hello World!</code>.</p>
		      
                      <p>Toteuta tehtäväpohjan pakkauksessa <code>wad.helloworld</code> olevan luokan <code>HelloWorld</code> <code>main</code>-metodiin palvelimen käynnistävä sovellus, joka kuuntelee kaikkia osoitteita. Kun palvelin vastaanottaa pyynnön, tulee palvelimen palauttaa merkkijono "Hello World!".</p>

                      <p><img class="browser-img" src="img/mooc/ex1.png"/></p>

                      <p>Käynnistä palvelin painamalla NetBeansin play-nappia tai suorittamalla <code>HelloWorld</code>-luokan <code>main</code>-metodi. Avaa nettiselain, mene osoitteeseen <a href="http://localhost:4567" target="_blank">http://localhost:4567</a>, ja näet selaimessasi tekstin "Hello World!".</p>

                      <p>Palvelin sammutetaan NetBeansissa punaista nappia painamalla -- vain yksi sovellus voi olla kerrallaan päällä samassa osoitteessa. Palauta tehtävä lopuksi Test My Code:n submit-napilla.</p>
                    </div>
                  </div>
		</div>


		<aside class="info">
		  <br/>
		  <h1>Apua! Palvelimeni ei suostu sammumaan!</h1>

		  <p>Palvelimen sammuttaminen tapahtuu NetBeansissa punaista neliötä klikkaamalla, joka sammuttaa suoritettavan ohjelman. Joissakin käyttöjärjestelmissä tämä on kuitenkin bugista, jolloin palvelin tulee sammuttaa komentoriviltä.</p>

		  <p>Saat portissa 4567 käynnissä olevan prosessin tunnuksen tietoon terminaalissa komennolla <code>lsof -i :4567</code>. Etsi komennon palauttamasta tulosteesta prosessin tunnus, jonka jälkeen voit sammuttaa prosessin komennolla <code>kill -9 prosessin-tunnus</code>.</p>

		  <p>Esimerkiksi:</p>

<pre>
> lsof -i :4567
COMMAND  PID     USER   FD   TYPE             DEVICE SIZE/OFF NODE NAME
java    9916 kayttaja   51u  IPv6 0x65802ef6be5c6f29      0t0  TCP *:tram (LISTEN)
>
</pre>

		  <p>Yllä prosessin tunnus (PID) on 9916. Tämän jälkeen prosessi sammutetaan komennolla <code>kill -9 9916</code>.</p>

<pre>
> lsof -i :4567
COMMAND  PID     USER   FD   TYPE             DEVICE SIZE/OFF NODE NAME
java    9916 kayttaja   51u  IPv6 0x65802ef6be5c6f29      0t0  TCP *:tram (LISTEN)
> kill -9 9916
</pre>
		  
		</aside>


		<h2>Palvelinohjelmiston polut</h2>

		<p>Opimme aiemmin, että <code>get</code>-metodin voi määritellä kuuntelemaan kaikkia palvelimelle tulevia pyyntöjä parametrilla <code>"*"</code>. Käytännössä parametrin avulla määritellään <em>polku</em>, johon palvelimelle tulevat pyynnöt voidaan ohjata. Tähdellä määritellään, että kaikki pyynnöt päätyvät samalle polulle. Muiden polkujen määrittely on luonnollisesti myös mahdollista.</p>

		<p>Antamalla poluksi merkkijonon <code>"/salaisuus"</code>, kaikki web-palvelimen osoitteeseen <code>/salaisuus</code> tehtävät pyynnöt ohjautuvat kyseiseen polkuun liitettyyn toiminnallisuuteen. Allaolevassa esimerkissä määritellään polku <code>/salaisuus</code> ja kerrotaan, että polkuun tehtävät pyynnöt palauttavat merkkijonon <code>"Kryptos"</code>.</p>

<pre class="sh_java">
get("/salaisuus", (req, res) -&gt; "Kryptos");
</pre>

		<p>Yhteen ohjelmaan voi myös määritellä useampia polkuja sekä niihin liittyviä toiminnallisuuksia. Alla olevassa esimerkissä on määritelty kolme erillistä polkua, joista jokainen palauttaa käyttäjälle merkkijonon.</p>

<pre class="sh_java">
import static spark.Spark.*;

public class Polut {
    public static void main(String[] args) {
        get("/path", (req, res) -&gt; "Polku (path)");
        get("/route", (req, res) -&gt; "Polku (route)");
        get("/trail", (req, res) -&gt; "Polku (trail)");
    }
}
</pre>

		<div class="tehtavat">
		  
		  <div class="tehtava" id="t-helloroutes">
		    
		    <header>
		      <h1>
                        <a data-toggle="collapse" class="collapsed" href="#t-helloroutes">
                          Hello Routes
                        </a>
                      </h1>
                    </header>
                    <div id="t-helloroutes" class="collapse">
		      
                      <p>Toteuta pakkauksessa <code>wad.helloroutes</code> olevaan luokkaan <code>HelloRoutes</code> seuraava toiminnallisuus:</p>

		      <ul>
			<li>Pyyntö polkuun <code>/hello</code> palauttaa käyttäjälle merkkijonon "Hello"</li>
			<li>Pyyntö polkuun <code>/routes</code> palauttaa käyttäjälle merkkijonon "Routes"</li>
		      </ul>

		      <p>Alla olevassa kuvassa on esimerkki tilanteesta, missä selaimella on tehty pyyntö polkuun <code>/hello</code></p>

		      <p><img class="browser-img" src="img/mooc/ex2.png"/></p>

		      <p>Palauta tehtävä TMC:lle kun olet valmis.</p>

                    </div>
                  </div>
                </div>
		

		<h2>Pyynnön parametrit</h2>

		<p>Pyynnöissä voi lähettää myös palvelimelle tietoa. Tutustutaan ensin yksinkertaisempaan tapaan, missä pyynnön parametrit lisätään osaksi haettavaa osoitetta. Esimerkiksi pyynnössä <code>http://localhost:4567/salaisuus?onko=nauris</code> on parametri nimeltä <code>onko</code>, jonka arvoksi on määritelty <code>nauris</code>.</p>

		<p>Parametrien lisääminen pyyntöön tapahtuu lisäämällä osoitteen perään kysymysmerkki, jota seuraa parametrin nimi, yhtäsuuruusmerkki, ja parametrille annettava arvo. Jos parametreja on useampia, erotellaan ne toisistaan &amp;-merkillä. Seuraavassa esimerkissä pyynnössä on kolme parametria, <code>eka</code>, <code>toka</code> ja <code>kolmas</code>, joiden arvot ovat <code>1</code>, <code>2</code> ja <code>3</code> vastaavasti.</p>

<pre>
http://localhost:4567/salaisuus?eka=1&amp;toka=2&amp;kolmas=3
</pre>

		<p>Pyynnössä tuleviin parametreihin pääsee Sparkissa käsiksi <code><a href="http://sparkjava.com/documentation.html#request" target="_blank">req</a></code>-parametrin metodilla <code>queryParams("<em>parametrinNimi</em>")</code>. Vastaavasti, kaikkien parametrien nimet saa metodilla <code>queryParams()</code>.</p>

		<p>Allaolevassa esimerkissä on luotu palvelinohjelma, jonka tehtävänä on tervehtiä kaikkia pyynnön tekijöitä. Ohjelma käsittelee polkuun <code>/hei</code> tulevia pyyntöjä, ja palauttaa niihin vastauksena tervehdyksen. Tervehdykseen liitetään pyynnössä tulevan <code>nimi</code>-nimisen parametrin arvo.</p>

<pre class="sh_java">
import static spark.Spark.*;

public class Parametrit {
    public static void main(String[] args) {
        get("/hei", (req, res) -&gt; "Hei " + req.queryParams("nimi") + ", mitä kuuluu?");
    }
}
</pre>

		<p>Nyt esimerkiksi osoitteeseen <code>http://localhost:4567/hei?nimi=Ada</code> tehtävä pyyntö saa vastaukseksi merkkijonon <code>Hei Ada, mitä kuuluu?</code>.</p>


		<aside class="info">
		  <br/>
		  <h1>Useamman komennon suorittaminen pyynnön yhteydessä</h1>

		  <p>Silloin tällöin ohjelmassa halutaan suorittaa useampi komento. Allaolevassa esimerkissä vastaanotetaan pyyntö polkuun <code>/hei</code> ja palautetaan merkkijono.</p>

<pre class="sh_java">
get("/hei", (req, res) -&gt; "Hei " + req.queryParams("nimi") + ", mitä kuuluu?");
</pre>

		  <p>Yllä metodilla on implisiittinen palautus, ja <code>return</code>-komentoa ei käyttäjälle näytetä. Suoritettavan koodin voi myös pilkkoa useampaan riviin, jolloin <code>(req, res) -&gt</code> -osaa seuraa avaava aaltosulku, suoritettava koodi, <code>return</code>-komennolla merkitty palautettava koodi, sekä sulkeva aaltosulku.</p>

<pre class="sh_java">
get("/hei", (req, res) -&gt; {
    String palautettava = "Hei ";
    palautettava += req.queryParams("nimi");
    palautettava += ", mitä kuuluu?";

    return palautettava;
});
</pre>


		</aside>

		<div class="tehtavat">
		  <div class="tehtava" id="t-helloqueryparams">
		    
		    <header>
		      <h1>
                        <a data-toggle="collapse" class="collapsed" href="#t-helloqueryparams">
                          Hello Query Params
                        </a>
                      </h1>
                    </header>
                    <div id="t-helloqueryparams" class="collapse">
		      
                      <p>Toteuta pakkauksessa <code>wad.helloqueryparams</code> olevaan luokkaan <code>HelloQueryParams</code> seuraava toiminnallisuus:</p>

		      <ul>
			<li>Pyyntö polkuun <code>/hello</code> palauttaa käyttäjälle merkkijonon "Hello ", johon on liitetty <code>param</code>-nimisen parametrin sisältämä arvo.</li>
			<li>Pyyntö polkuun <code>/params</code> palauttaa käyttäjälle kaikkien pyynnön mukana tulevien parametrien nimet.</li>
		      </ul>

		      <p>Alla olevassa kuvassa on esimerkki tilanteesta, missä selaimella on tehty pyyntö polkuun <code>/params?hello=world&amp;it=works</code></p>

		      <p><img class="browser-img" src="img/mooc/ex3.png"/></p>

		      <p>Palauta tehtävä TMC:lle kun olet valmis.</p>

                    </div>
                  </div>
                </div>
		


		<div class="tehtavat">
		  <div class="tehtava" id="t-calculator">
		    
		    <header>
		      <h1>
                        <a data-toggle="collapse" class="collapsed" href="#t-calculator">
                          Calculator
                        </a>
                      </h1>
                    </header>
                    <div id="t-calculator" class="collapse">
		      
		      <p>Toteuta tässä tehtävässä pakkauksessa <code>wad.calculator</code> sijaitsevaan <code>Calculator</code>-luokkaan seuraava toiminnallisuus:</p>

		      <ul>
			<li>Pyyntö polkuun <code>/add</code> laskee parametrien <code>first</code> ja <code>second</code> arvot yhteen, ja palauttaa vastauksen käyttäjälle. Huomaa, että arvot ovat numeroita, ja ne tulee myös käsitellä numeroina.</li>

			<li>Pyyntö polkuun <code>/multiply</code> kertoo parametrien <code>first</code> ja <code>second</code> arvot, ja palauttaa vastauksen käyttäjälle.</li>

			<li>Pyyntö polkuun <code>/sum</code> laskee <em>kaikkien</em> parametrien arvot yhteen, ja palauttaa vastauksen käyttäjälle.</li>
		      </ul>

		      <p>Alla on esimerkki ohjelman toiminnasta, kun pyyntö tehdään <code>/sum</code>-polkuun.</p>

		      <p><img class="browser-img" src="img/mooc/ex4.png"/></p>

		      <p>Palauta tehtävä TMC:lle kun olet valmis.</p>

                    </div>
                  </div>
                </div>
		

                <h2>Näkymät ja data</h2>

                <p>Aiemmat sovelluksemme ovat vastaanottaneet tiettyyn polkuun tulevan pyynnön ja palauttaneet käyttäjälle merkkinomuodossa olevaa tietoa. Tämä ei kuitenkaan ole ainoa palvelinohjelmistojen toimintatyyppi, vaan palvelin voi myös luoda käyttäjälle näkymän, jonka selain lopulta näyttää käyttäjälle. Näkymät luodaan tyypillisesti HTML-kielellä siten, että HTML-kielen sekaan on upotettu komentoja, joiden perusteella näkymään lisätään palvelimen tuottamaa tietoa.</p>

                <p>Tällä kurssilla käyttämämme apuväline näkymän luomiseen on <a href="http://www.thymeleaf.org/" target="_blank">Thymeleaf</a>, joka tarjoaa välineitä datan lisäämiseen HTML-sivuille. Käytännössä näkymiä luodessa luodaan ensin HTML-sivut, jonka jälkeen sivuille lisätään komentoja Thymeleafin käsiteltäväksi.</p>

                <p>Thymeleaf-sivut ("templatet") sijaitsevat tällä kurssilla projektin kansiossa <code>src/main/resources/templates</code> tai sen alla olevissa kansioissa. NetBeansissa kansio löytyy kun klikataan "Other Sources"-kansiota.</p>

		<aside class="info">
		  <br/>
		  
		  <h1>Thymeleafin käyttöönotto</h1>

                  <p>Thymeleafin käyttöönotto vaatii <code>pom.xml</code>-tiedostossa olevien riippuvuuksien muokkaamista. Spark Javan perustoiminnallisuus saatiin käyttöön lisäämällä <code>com.sparkjava</code>-ryhmän komponentti <code>spark-core</code> pom.xml-tiedoston dependencies-osioon. Sparkille saa Thymeleaf-tuen lisäämällä pom.xml-tiedostoon riippuvuuden </p>

                  <pre class="sh_xml">
&lt;dependency&gt;
    &lt;groupId&gt;com.sparkjava&lt;/groupId&gt;
    &lt;artifactId&gt;spark-template-thymeleaf&lt;/artifactId&gt;
    &lt;version&gt;2.3&lt;/version&gt;
&lt;/dependency&gt;</pre>

		  <p>Jos edellämainittu riippuvuus ei ole aiemmin ladattuna koneelle, tulee se myös hakea. Tämä onnistuu joko kirjoittamalla komentorivillä projektin juuressa komento <code>mvn dependency:resolve</code> tai valitsemalle NetBeansissa projektiin liittyvä kansio <em>Dependencies</em> oikealla hiirennapilla, ja painamalla <em>Download Declared Dependencies</em>.</p>
		  
		  <p>Thymeleaf vaatii myös, että jokaisen HTML-sivun <code>html</code>-elementin määrittelyssä tulee olla seuraavat määrittelyt.</p>  
		  
                  <pre class="sh_xml">
&lt;html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"&gt;</pre>
		</aside>


		<p>Allaolevassa esimerkissä luodaan juuripolkua <code>/</code> kuunteleva sovellus. Kun sovellukseen tehdään pyyntö, palautetaan HTML-sivu, jonka Thymeleaf käsittelee. Thymeleaf päättelee palautettavan sivun annettavan merkkijonon perusteella -- alla annetaan merkkijono <code>"sivu"</code>, jolloin Thymeleaf etsii kansiosta <code>src/main/resources/templates/</code> sivua <code>sivu.html</code>. Kun sivu löytyy, Thymeleaf käsittelee sen ja palauttaa sen käyttäjälle. Palaamme hieman myöhemmin tarkemmin käsittelyyn.</p>


<pre class="sh_java">
import java.util.HashMap;
import spark.ModelAndView;
import static spark.Spark.*;
import spark.template.thymeleaf.ThymeleafTemplateEngine;

public class ThymeleafSivu {

    public static void main(String[] args) throws Exception {
        get("/", (req, res) -> {
            HashMap&lt;String, Object&gt; data = new HashMap&lt;&gt;();

            return new ModelAndView(data, "sivu");
        }, new ThymeleafTemplateEngine());
    }
}
</pre>



		<p></p>

		<div class="tehtavat">
		  <div class="tehtava" id="t-hellothymeleaf">
		    
		    <header>
		      <h1>
                        <a data-toggle="collapse" class="collapsed" href="#t-hellothymeleaf">
                          Hello Thymeleaf
                        </a>
                      </h1>
                    </header>

                    <div id="t-hellothymeleaf" class="collapse">
		      
		      <p>Toteuta tässä tehtävässä pakkauksessa <code>wad.hellothymeleaf</code> sijaitsevaan <code>HelloThymeleaf</code>-luokkaan seuraava toiminnallisuus:</p>

		      <ul>
			<li>Pyyntö juuripolkuun <code>/</code> palauttaa käyttäjälle Thymeleafin avulla kansiossa <code>src/main/resources/templates/</code> olevan <code>index.html</code>-tiedoston.</li>

			<li>Pyyntö polkuun <code>/video</code> palauttaa käyttäjälle Thymeleafin avulla kansiossa <code>src/main/resources/templates/</code> olevan <code>video.html</code>-tiedoston.</li>

		      </ul>

		      <p>Alla on esimerkki ohjelman toiminnasta, kun pyyntö on tehty juuripolkuun.</p>

		      <p><img class="browser-img" src="img/mooc/ex5.png"/></p>

		      <p>Palauta tehtävä TMC:lle kun olet valmis.</p>

                    </div>
                  </div>
                </div>

		
		<p>Tarkastellaan edellä toteutettua sivun palauttamista vielä tarkemmin.</p>

<pre class="sh_java">
get("/", (req, res) -> {
    HashMap&lt;String, Object&gt; map = new HashMap&lt;&gt;();

    return new ModelAndView(map, "sivu");
}, new ThymeleafTemplateEngine());
</pre>

                <p>Ensimmäisellä rivillä kerromme, että juuripolkuun tulevat pyynnöt tulee käsitellä seuraavasti. Tätä seuraa pyynnön käsittelyyn liittyvä lohko, josta palautetaan olio, joka sisältää <code>HashMap</code>-olion sekä tiedon näytettävästä html-sivusta. Tämän jälkeen pyynnön käsittelyyn lisätään vielä erillinen olio, <code>ThymeleafTemplateEngine</code>, joka käsittelee html-sivun ennen sen palautusta.</p>

		<p>Tässä oikeastaan tulee kaksi uutta ja mielenkiintoista asiaa.</p>

		<p>HashMap on ohjelmoinnissa käytettävä lokerikko, missä jokaisella lokerolla on nimi, mihin arvon voi asettaa. Alla olevassa esimerkissä luomme ensin HashMap-olion, jonka jälkeen asetamme lokeroon nimeltä <code>teksti</code> arvon <code>"Hei mualima!"</code>.</p>

<pre class="sh_java">
HashMap&lt;String, Object&gt; map = new HashMap&lt;&gt;();
map.put("teksti", "Hei mualima!");
</pre>

		<p>Kun HashMap-olio <em>palautetaan</em> pyynnön käsittelyn jälkeen -- <code>return new ModelAndView(map, "sivu");</code> -- annetaan lokerikko Thymeleafin käyttöön.</p>

		<h3>Sivun käsittely Thymeleafissa</h3>

		<p>Oletetaan, että käytössämme oleva <code>sivu.html</code> näyttää seuraavalta:</p>

<pre class="sh_xml">
&lt;!DOCTYPE html&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"&gt;
    &lt;head&gt;
        &lt;title&gt;Otsikko&lt;/title&gt;
    &lt;/head&gt;

    &lt;body&gt;
        &lt;h1&gt;Hei maailma!&lt;/h1&gt;

        &lt;h2 th:text="${teksti}"&gt;testi&lt;/h2&gt;
    &lt;/body&gt;
&lt;/html&gt;
</pre>

		<p>Kun Thymeleaf käsittelee HTML-sivun, se etsii sieltä elementtejä, joilla on <code>th:</code>-alkuisia attribuutteja. Ylläolevasta sivusta Thymeleaf löytää <code>h2</code>-elementin, jolla on attribuutti <code>th:text</code> -- <code>&lt;h2 th:text="${teksti}"&gt;testi&lt;/h2&gt;</code>. Attribuutti <code>th:text</code> kertoo Thymeleafille, että elementin tekstiarvo (testi) tulee korvata attribuutin arvon ilmaisemalla muuttujalla. Attribuutin <code>th:text</code> arvona on <code>${teksti}</code>, jolloin Thymeleaf etsii HashMap-oliosta avaimella <code>"teksti"</code> arvoa.</p>

		<p>Käytännössä Thymeleaf etsii siis HashMap-oliosta lokeron nimeltä <code>teksti</code> ja asettaa siinä olevan arvon <code>h2</code>-elementin tekstiarvoksi. Tässä tapauksessa teksti <code>testi</code> korvataan HashMap-olion lokerosta teksti löytyvällä arvolla, eli tekstillä <code>Hei mualima!</code>.</p>

		<p></p>

		
		<div class="tehtavat">
		  <div class="tehtava" id="t-hellomodel">
		    
		    <header>
		      <h1>
                        <a data-toggle="collapse" class="collapsed" href="#t-hellomodel">
                          Hello Model
                        </a>
                      </h1>
                    </header>

                    <div id="t-hellomodel" class="collapse">
		      
		      <p>Tehtäväpohjan mukana tulevaan HTML-tiedostoon on toteutettu tarina, joka tarvitsee otsikon ja päähenkilön. Toteuta pakkauksessa <code>wad.hellomodel</code> sijaitsevaan <code>HelloModel</code>-luokkaan ohjelma, joka käsittelee juuripolkuun tulevia pyyntöjä, ja käyttää pyynnössä tulevia parametreja tarinan täydentämiseen. Voit olettaa, että pyynnön mukana tulevien parametrien nimet ovat <code>title</code> ja <code>person</code>.</p>

		      <p>Lisää pyynnön mukana tulevien parametrien arvot Thymeleafille annettavaan HashMappiin. Otsikon avaimen tulee olla <code>"title"</code>, ja henkilön avaimen tulee olla <code>"person"</code>. Palautettava sivu on <code>index.html</code>.</p>

		      <p>Alla on esimerkki ohjelman toiminnasta, kun juuripolkuun tehdyssä pyynnössä on annettuna otsikko ja henkilö.</p>

		      <p><img class="browser-img" src="img/mooc/ex6.png"/></p>
		      
		      <p>Palauta tehtävä TMC:lle kun olet valmis.</p>
		      
                    </div>
                  </div>
                </div>

		
		<h2>Tiedon lähettäminen palvelimelle</h2>
		

                <p>HTML-sivuille voi määritellä lomakkeita (form), joiden avulla käyttäjä voi lähettää tietoa palvelimelle. Lomakkeen määrittely tapahtuu <code>form</code>-elementin avulla, jolle kerrotaan polku, mihin lomake lähetetään (action), sekä pyynnön tyyppi (method). Pidämme pyynnön tyypin toistaiseksi GET-tyyppisenä.</p>

		<p>Lomakkeeseen voidaan määritellä mm. tekstikenttiä (<code>&lt;input type="text"...</code>) sekä painike, jolla lomake lähetetään (<code>&lt;input type="submit"...</code>). Alla tekstikentän <code>name</code>-attribuutin arvoksi on asetettu nimi. Tämä tarkoittaa sitä, että kun lomakkeen tiedot lähetetään palvelimelle, tulee pyynnössä <code>nimi</code>-niminen parametri, jonka arvona on tekstikenttään kirjoitettu teksti.</p>

<pre class="sh_xml">
&lt;form action="/" method="GET"&gt;
    &lt;input type="text" name="nimi"/&gt;
    &lt;input type="submit"/&gt;
&lt;/form&gt;</pre>

		<p></p>

		
		<div class="tehtavat">
		  <div class="tehtava" id="t-helloform">
		    
		    <header>
		      <h1>
                        <a data-toggle="collapse" class="collapsed" href="#t-helloform">
                          Hello Form
                        </a>
                      </h1>
                    </header>

                    <div id="t-helloform" class="collapse">
		      
		      <p>Tehtäväpohjassa on toiminnallisuus, jonka avulla sivulla voi näyttää tietoa, ja jonka avulla sivulta lähetetty tieto voidaan myös käsitellä. Tiedon lähettämiseen tarvitaan sivulle kuitenkin lomake.</p>

		      <p>Toteuta tehtäväpohjan kansiossa <code>src/main/resources/templates</code> olevaan <code>index.html</code>-tiedostoon lomake. Lomakkeessa tulee olla tekstikenttä, jonka nimen tulee olla <code>content</code>. Tämän lisäksi, lomakkeessa tulee olla myös nappi, jolla lomakkeen voi lähettää. Lomakkeen tiedot tulee lähettää juuriosoitteeseen GET-tyyppisellä pyynnöllä.</p>

		      <p>Kun sovellus toimii oikein, voit vaihtaa sivulla näkyvää otsikkoa lomakkeen avulla.</p>
		      
                    </div>
                  </div>
                </div>


		<h2>Listojen käsittely</h2>


		<p>Thymeleafille annettavalle HashMapille (ns. Model) voi asettaa tekstin lisäksi myös arvokokoelmia. Alla luomme "pääohjelmassa" listan, joka asetetaan Thymeleafin käsiteltäväksi menevään HashMap-olioon jokaisen juuripolkuun tehtävän pyynnön yhteydessä. Jos juuripolkuun lähetetään parametri nimeltä <code>"content"</code>, lisätään se myös listaan.</p>

<pre class="sh_java">
List&lt;String&gt; lista = new ArrayList<>();
lista.add("Hello world!");

get("/", (req, res) -> {
    HashMap&lt;String, Object&gt; data = new HashMap&lt;&gt;();

    if (req.queryParams().contains("content")) {
        list.add(req.queryParams("content"));
    }

    data.put("lista", list);
    return new ModelAndView(data, "index");
}, new ThymeleafTemplateEngine());
</pre>


		<p>Listan läpikäynti Thymeleafissa tapahtuu attribuutin <code>th:each</code> avulla. Sen määrittely saa muuttujan nimen, johon kokoelmasta otettava alkio kullakin iteraatiolla tallennetaan, sekä läpikäytävän kokoelman. Perussyntaksiltaan <code>th:each</code> on seuraavanlainen.</p>

<pre class="sh_xml">
&lt;pre&gt;
    &lt;p th:each="alkio : ${lista}"&gt;
        &lt;span th:text="${alkio}"&gt;hello world!&lt;/span&gt;
    &lt;/p&gt;
&lt;/pre&gt;</pre>

                <p>Yllä käytämme attribuuttia nimeltä <code>joukko</code>, ja tulostamme yksitellen sen sisältämät alkiot. Attribuutin <code>th:each</code> voi asettaa käytännössä mille tahansa toistettavalle elementille. Esimerkiksi listan voisi tehdä seuraavalla tavalla.</p>

                <pre class="sh_xml">
&lt;ul&gt;
    &lt;li th:each="alkio : ${lista}"&gt;
        &lt;span th:text="${alkio}"&gt;hello world!&lt;/span&gt;
    &lt;/li&gt;
&lt;/ul&gt;</pre>


                <p><em>Huom! Eräs klassinen virhe on määritellä iteroitava joukko merkkijonona <code>th:each="alkio : joukko"</code>. Tämä ei luonnollisesti toimi.</em></p>


		<div class="tehtavat">
		  <div class="tehtava" id="t-hellolist">
		    
		    <header>
		      <h1>
                        <a data-toggle="collapse" class="collapsed" href="#t-hellolist">
                          Hello List
                        </a>
                      </h1>
                    </header>

                    <div id="t-hellolist" class="collapse">
		      
		      <p>Tehtäväpohjassa on palvelinpuolen toiminnallisuus, jossa käsitellään juuripolkuun tuleva pyyntö, sekä lisätään lista Thymeleafille sivun käsittelyyn. Tehtäväpohjaan liittyvä html-sivu ei kuitenkaan sisällä juurikaan toiminnallisuutta.</p>

		      <p>Lisää html-sivulla (1) listalla olevien arvojen tulostaminen <code>th:each</code>-komennon avulla, ja (2) lomake, jonka avulla palvelimelle voidaan lähettää uusia arvoja.</p>

		      <p>Alla on esimerkki ohjelman toiminnasta, kun sivulle on lisätty muutama rivi lomakkeen avulla. Viimeisimpänä on juuri lisätty teksti "Hello?".</p>

		      <p><img class="browser-img" src="img/mooc/ex8.png"/></p>
		      
		      
                    </div>
                  </div>
                </div>


		<div class="tehtavat">
		  <div class="tehtava" id="t-notebook">
		    
		    <header>
		      <h1>
                        <a data-toggle="collapse" class="collapsed" href="#t-notebook">
                          Notebook
                        </a>
                      </h1>
                    </header>

                    <div id="t-notebook" class="collapse">
		      
		      <p>Toteuta tehtäväpohjan pakkauksessa <code>wad.notebook</code> olevaan <code>Notebook</code>-luokkaan muistio-ohjelma, jolle voi lisätä muistiinpanoja. Tee ohjelmastasi sellainen, että jos muistiinpanoja on yli 10, se muistaa ja näyttää niistä vain viimeisimmät 10.</p>

		      <p>Alla on esimerkki muistiosta, kun siihen on lisätty 3 viestiä.</p>

		      <p><img class="browser-img" src="img/mooc/ex9.png"/></p>
		      
		      
                    </div>
                  </div>
                </div>



		<h2>Pyynnön uudelleenohjaus ja POST</h2>

		<p>Olemme tähän mennessä toteuttaneet palvelinohjelmistoihimme vain kyvyn käsitellä GET-tyyppisiä pyyntöjä. GET-tyyppisiä pyyntöjä käytetään ensisijaisesti tiedon hakemiseen, eikä niitä oikeastaan pitäisi käyttää lainkaan tiedon muuttamiseen. Toinen tapa lähettää tietoa palvelimelle on <code>POST</code>-tyyppiset pyynnöt, joita käytettäessä pyynnön parametrit kulkevat pyynnön <em>rungossa</em> -- palaamme tähän myöhemmin kurssilla.</p>

                <p>Oikeastaan kaikki pyynnöt, joissa lähetetään tietoa palvelimelle, ovat ongelmallisia jos pyynnön vastauksena palautetaan näytettävä sivu. Tällöin käyttäjä voi sivun uudelleenlatauksen (esim. painamalla F5) yhteydessä lähettää aiemmin lähettämänsä datan vahingossa uudelleen. Kokeile tätä jossain aiemmassa tehtävässä kun olet lähettänyt lomakkeella tietoa!</p>

                <p>On tyylikkäämpää toteuttaa lomakkeen dataa vastaanottava toiminnallisuus siten, että lähetetyn tiedon käsittelyn jälkeen käyttäjälle palautetaan vastauksena uudelleenohjauspyyntö. Tämän jälkeen käyttäjän selain tekee uuden pyynnön uudelleenohjauspyynnön mukana annettuun osoitteeseen. Tätä toteutustapaa kutsutaan <a href="http://en.wikipedia.org/wiki/Post/Redirect/Get" target="_blank">Post/Redirect/Get</a>-suunnittelumalliksi, ja sillä mm. estetään lomakkeiden uudelleenlähetys, jonka lisäksi vähennetään toiminnallisuuden toisteisuutta.</p>

		<p>Alla on toteutettu POST-tyyppistä pyyntöä kuunteleva polku sekä siihen liittyvä toiminnallisuus. Komennolla <code>res.redirect("/");</code> kerrotaan, että pyynnölle tulee lähettää vastauksena uudelleenohjauspyyntö polkuun <code>"/"</code>. Kun selain vastaanottaa uudelleenohjauspyynnön, tekee se GET-tyyppisen pyynnön uudelleenohjauspyynnössä annettuun osoitteeseen.</p>

<pre class="sh_java">
post("/", (req, res) -> {
    res.redirect("/");
    return "";
});
</pre>
		<p></p>

		<div class="tehtavat">
		  <div class="tehtava" id="t-hellopostredirectget">
		    
		    <header>
		      <h1>
                        <a data-toggle="collapse" class="collapsed" href="#t-hellopostredirectget">
                          Hello POST/Redirect/GET
                        </a>
                      </h1>
                    </header>

                    <div id="t-hellopostredirectget" class="collapse">
		      
		      <p>Tehtäväpohjassa on sekä muistilappujen listaamistoiminnallisuus, että lomake, jonka avulla voidaan lähettää POST-tyyppisiä pyyntöjä palvelimelle. Toteuta sovellukseen toiminnallisuus, missä palvelin kuuntelee POST-tyyppisiä pyyntöjä, lisää pyynnön yhteydessä tulevan tiedon sovelluksessa olevaan listaan, ja uudelleenohjaa käyttäjän tekemään GET-tyyppisen pyynnön juuriosoitteeseen.</p>
		      
                    </div>
                  </div>
                </div>

		<h2>Olioita kaikkialla!</h2>

		<p>Thymeleafille annettavaan HashMap-olioon voi hyvin lisätä myös olioita. Oletetaan, että käytössämme on henkilöä kuvaava luokka.</p>

<pre class="sh_java">
public class Henkilo {
    private String nimi;

    public Henkilo(String nimi) {
        this.nimi = nimi;
    }

    public String getNimi() {
        return this.nimi;
    }

    public void setNimi(String nimi) {
        this.nimi = nimi;
    }
}
</pre>

		<p>Henkilö-olion lisääminen HashMap-olioon on suoraviivaista:</p>

<pre class="sh_java">
get("/", (req, res) -&gt; {
    HashMap&lt;String, Object&gt; data = new HashMap&lt;&gt;();

    data.put("henkilo", new Henkilo("Le Pigeon"));
    return new ModelAndView(data, "index");
}, new ThymeleafTemplateEngine());
</pre>

		<p>Kun sivua luodaan, henkilöön päästään käsiksi HashMap-olioon asetetun avaimen perusteella. Edellä luotu "Le Pigeon"-henkilö on HashMapissa tallessa avaimella "henkilo". Kuten aiemminkin, avaimella pääsee olioon käsiksi.</p>


<pre class="sh_xml">
&lt;h2 th:text="${henkilo}"&gt;Henkilön nimi&lt;/h2&gt;</pre>

		<p>Ylläolevaa Henkilön tulostusta kokeillessamme saamme näkyville (esim.) merkkijonon <code>Henkilo@29453f44</code> -- ei ihan mitä toivoimme. Käytännössä Thymeleaf kutsuu edellisessä tapauksessa olioon liittyvää <code>toString</code>-metodia, jota emme ole määritelleet. Pääsemme oliomuuttujiin käsiksi olemassaolevien <code>get<em>Muuttuja</em></code>-metodien kautta. Jos haluamme tulostaa Henkilö-olioon liittyvän nimen, kutsumme metodia <code>getNimi</code>. Thymeleafin käyttämässä notaatiossa kutsu muuntuu muotoon <code>henkilo.nimi</code>. Saamme siis halutun tulostuksen seuraavalla tavalla:</p>

<pre class="sh_xml">
&lt;h2 th:text="${henkilo.nimi}"&gt;Henkilön nimi&lt;/h2&gt;</pre>

		<h3>Olioita listalla</h3>

		<p>Listan läpikäynti Thymeleafissa tapahtuu attribuutin <code>th:each</code> avulla. Sen määrittely saa muuttujan nimen, johon kokoelmasta otettava alkio kullakin iteraatiolla tallennetaan, sekä läpikäytävän kokoelman. Perussyntaksiltaan <code>th:each</code> on jo tullut aiemmin tutuksi.</p>

<pre class="sh_xml">
&lt;pre&gt;
    &lt;p th:each="alkio : ${lista}"&gt;
        &lt;span th:text="${alkio}"&gt;hello world!&lt;/span&gt;
    &lt;/p&gt;
&lt;/pre&gt;</pre>

                <p>Iteroitavan joukon alkioiden ominaisuuksiin pääsee käsiksi aivan samalla tavalla kuin muiden olioiden ominaisuuksiin. Tutkitaan seuraavaa esimerkkiä, jossa listaan lisätään kaksi henkilöä, lista lisätään pyyntöön, ja lopulta luodaan näkymä Thymeleafin avulla.</p>

                <pre class="sh_java">
List&lt;Henkilo&gt; henkilot = new ArrayList&lt;&gt;();
henkilot.add(new Person("James Gosling"));
henkilot.add(new Person("Martin Odersky"));

get("/", (req, res) -&gt; {
    HashMap&lt;String, Object&gt; data = new HashMap&lt;&gt;();

    data.put("list", henkilot);
    return new ModelAndView(data, "index");
}, new ThymeleafTemplateEngine());</pre>

                <pre class="sh_xml">
&lt;p&gt;Ja huomenna puheet pitävät:&lt;/p&gt;
&lt;ol&gt;
    &lt;li th:each="henkilo : ${list}"&gt;
        &lt;span th:text="${henkilo.nimi}"&gt;Esimerkkihenkilo&lt;/span&gt;
    &lt;/li&gt;
&lt;/ol&gt;
</pre>

                <p>Käyttäjälle lähetettävä sivu näyttää palvelimella tapahtuneen prosessoinnin jälkeen seuraavalta.</p>

                <pre class="sh_xml">
&lt;p&gt;Ja huomenna puheet pitävät:&lt;/p&gt;
&lt;ol&gt;
    &lt;li&gt;&lt;span&gt;James Gosling&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;Martin Odersky&lt;/span&gt;&lt;/li&gt;
&lt;/ol&gt;</pre>

		<p></p>

		<div class="tehtavat">
		  <div class="tehtava" id="t-helloobjects">
		    
		    <header>
		      <h1>
                        <a data-toggle="collapse" class="collapsed" href="#t-helloobjects">
                          Hello Objects
                        </a>
                      </h1>
                    </header>

                    <div id="t-helloobjects" class="collapse">
		      
		      <p>Tehtäväpohjassa on sovellus, jossa käsitellään <code>Item</code>-tyyppisiä olioita. Tehtävänäsi on lisätä sovellukseen lisätoiminnallisuutta:</p>

		      <ul>
			<li>Kun käyttäjä avaa sovelluksen, tulee hänen lomakkeen lisäksi nähdä lista esineistä. Jokaisesta esineestä tulee tulla ilmi sen nimi (name) ja tyyppi (type).</li>
			<li>Kun käyttäjä lähettää lomakkeella uuden esineen palvelimelle, tulee palvelimen säilöä esine listalle seuraavaa näyttämistä varten. Huomaa, että lomake lähettää tiedot POST-pyynnöllä sovelluksen juureen. Kun esine on säilötty, uudelleenohjaa käyttäjän pyyntö siten, että käyttäjän selain tekee GET-tyyppisen pyynnön sovelluksen juuripolkuun.</li>
		      </ul>

		      <p>Allaolevassa esimerkissä sovellukseen on lisätty olemassaolevan taikurin hatun lisäksi <a href="https://en.wikipedia.org/wiki/Party_hat" target="_blank">Party hat</a>, eli bilehattu.</p>
		     
		      <p><img class="browser-img" src="img/mooc/ex11.png"/></p>
		      
                    </div>
                  </div>
                </div>


		<h2>Polkumuuttujat</h2>

		<p>Polkuja käytetään erilaisten resurssien tunnistamiseen ja yksilöintiin. Usein kuitenkin vastaan tulee tilanne, missä luodut resurssit ovat uniikkeja, emmekä niiden tietoja ennen sovelluksen käynnistymistä. Jos haluaisimme näyttää tietyn resurssin tiedot, voisimme lisätä pyyntöön parametrin, minkä arvo olisi haetun resurssin tunnus.</p>

		<p>Toinen vaihtoehto on ajatella polkua haettavan resurssin tunnistajana. Sparkin avulla polun voi määritellä parametriksi kaksoispisteen avulla -- esimerkiksi polku <code>"/:arvo"</code> ottaisi vastaan minkä tahansa juuripolun alle tulevan kyselyn, ja tallentaisi polun arvon myöhempää käyttöä varten. Tällöin jos käyttäjä tekee pyynnön osoitteeseen <code>http://localhost:4567/kirja</code>, löytyy arvo "kirja" muuttujasta <code>req.params(":arvo")</code>.</p>

		<p>Yksittäisen henkilön näyttäminen onnistuisi esimerkiksi seuravavasti:</p>

                <pre class="sh_java">
Map&lt;Integer, Henkilo&gt; henkilot = new HashMap&lt;&gt;();
henkilot.put(1, new Person("James Gosling"));
henkilot.add(2, new Person("Martin Odersky"));

get("/:id", (req, res) -&gt; {
    HashMap&lt;String, Object&gt; data = new HashMap&lt;&gt;();

    data.put("henkilo", henkilot.get(Integer.parseInt(req.params(":id"))));
    return new ModelAndView(data, "index");
}, new ThymeleafTemplateEngine());</pre>

		<p></p>

		<div class="tehtavat">
		  <div class="tehtava" id="t-hellopathvariables">
		    
		    <header>
		      <h1>
                        <a data-toggle="collapse" class="collapsed" href="#t-hellopathvariables">
                          Hello Path Variables
                        </a>
                      </h1>
                    </header>

                    <div id="t-hellopathvariables" class="collapse">
		      
		      <p>Tehtäväpohjassa on sovellus, jossa käsitellään taas edellisestä tehtävästä tuttuja <code>Item</code>-tyyppisiä olioita. Tällä kertaa esineet kuitenkin kuvastavat hattuja. Kun sovelluksen juureen tehdään pyyntö, käyttäjälle näytetään oletushattu ("default"). Lisää sovellukseen toiminnallisuus, minkä avulla tiettyyn polkuun tehtävä kysely palauttaa sivun, jossa näkyy tietyn hatun tiedot.</p>

		      <p>Sovelluksen juuripolkuun tehtävä pyyntö näyttää seuraavanlaisen sivun:</p>

		      <p><img class="browser-img" src="img/mooc/ex12-default.png"/></p>
		      
		      <p>Muihin osoitteisiin tehtävät pyynnöt taas palauttavat tehtäväpohjassa olevasta <code>items</code>-hajautustaulusta polkuun sopivan hatun. Esimerkiksi pyyntö polkuun <code>/ascot</code> näyttää seuraavanlaisen sivun:</p>

		      <p><img class="browser-img" src="img/mooc/ex12-ascot.png"/></p>
		      		      
                    </div>
                  </div>
                </div>

		<div class="tehtavat">
		  <div class="tehtava" id="t-helloindividualpages">
		    
		    <header>
		      <h1>
                        <a data-toggle="collapse" class="collapsed" href="#t-helloindividualpages">
                          Hello Individual Pages
                        </a>
                      </h1>
                    </header>

                    <div id="t-helloindividualpages" class="collapse">
		      
		      <p>Edellisessä tehtävässä käytössämme oli vain yksi sivu. Olisi kuitenkin hienoa, jos jokaiselle hatulle olisi oma sivu -- ainakin sovelluksen käyttäjän näkökulmasta.</p>

		      <p>Tehtäväpohjassa on valmiina sovellus, joka listaa olemassaolevat hatut, ja näyttää ne käyttäjälle. Jokaisen hatun yhteydessä on linkki, jota klikkaamalla pitäisi päästä hatun omalle sivulle.</p>

		      <p>Toteuta sekä html-sivu (<code>single.html</code>), että sopiva metodi, joka ohjaa pyynnön sivulle.</p>


		      <p>Pyyntö sovelluksen juureen luo seuraavanlaisen sivun.</p>

		      <p><img class="browser-img" src="img/mooc/ex13-list.png"/></p>

		      <p>Jos sivulta klikkaa hattua, pääsee tietyn hatun tiedot sisältävälle sivulle. Alla olevassa esimerkissä on klikattu taikurin hattuun liittyvää linkkiä.</p>

		      <p><img class="browser-img" src="img/mooc/ex13-single.png"/></p>

		      		      
                    </div>
                  </div>
                </div>


		<div class="tehtavat">
		  <div class="tehtava" id="t-todoapplication">
		    
		    <header>
		      <h1>
                        <a data-toggle="collapse" class="collapsed" href="#t-todoapplication">
                          Todo Application
                        </a>
                      </h1>
                    </header>

                    <div id="t-todoapplication" class="collapse">
		      
		      <p>Tässä tehtävässä tulee rakentaa tehtävien hallintaan tarkoitettu sovellus. Sovelluksen käyttämät sivut ovat valmiina näkyvissä, itse sovelluksen pääset toteuttamaan itse.</p>

		      <p>Sovelluksen tulee sisältää seuraavat toiminnallisuudet:</p>

		      <ul>
			<li>Kaikkien tehtävien listaaminen. Kun käyttäjä tekee pyynnön sovelluksen juuripolkuun, tulee hänelle näyttää sivu, missä tehtävät on listattuna. Sivulla on myös lomake tehtävien lisäämiseen. </li>
			<li>Yksittäisen tehtävän lisääminen. Kun käyttäjä täyttää lomakkeen sivulla, ja lähettää tiedot palvelimelle, tulee sovelluksen lisätä tehtävä näytettävään listaan.</li>
			<li>Yksittäisen tehtävän poistaminen. Kun käyttäjä painaa tehtävään liittyvää <code>Done!</code>-nappia, tulee tehtävä poistaa listalta.</li>
			<li>Yksittäisen tehtävän näyttäminen. Kun käyttäjä klikkaa tehtävään liittyvää linkkiä, tulee käyttäjälle näyttää tehtäväsivu. Huom! Tehtävään liittyvien tarkistusten määrä tulee kasvaa aina yhdellä kun sivulla vieraillaan.</li>
		      </ul>

		      <p>Alla kuva tehtävien listauksesta:</p>

		      <p><img class="browser-img" src="img/mooc/ex14-list.png"/></p>

		      <p>Kun tehtävää klikkaa, näytetään erillinen tehtäväsivu:</p>

		      <p><img class="browser-img" src="img/mooc/ex14-item-1.png"/></p>
		      
		      <p>Kun sivu avataan toisen kerran, kasvaa tehtävien tarkistukseen liittyvä laskuri:</p>

		      <p><img class="browser-img" src="img/mooc/ex14-item-2.png"/></p>
		      
		      		      
                    </div>
                  </div>
                </div>


		<h2>Tyylitiedostot</h2>

		<p>Olet ehkäpä huomannut, että tähän mennessä tekemämme web-sovellukset eivät ole kovin kaunista katsottavaa. Kurssilla pääpaino on palvelinpään toiminnallisuuden toteuttamisessa, joten emme jatkossakaan keskity sivustojen ulkoasuun. Sivujen ulkoasun muokkaaminen on kuitenkin melko suoraviivaista. Verkosta löytyy iso kasa oppaita sivun ulkoasun määrittelyyn -- <a href="http://www.w3schools.com/css/" target="_blank">tässä yksi</a>.</p>

		<p>Käytämme kurssilla muutamassa tehtävässä valmista <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a> -kirjastoa ulkoasun määrittelyyn. Ulkoasun määrittely tapahtuu lisäämällä sivun <code>head</code>-osioon oleelliset kirjastot -- tässä kirjastot haetaan <a href="https://www.bootstrapcdn.com/" target="_blank">https://www.bootstrapcdn.com/</a>-palvelusta, joka tarjoaa kirjastojen ylläpito- ja latauspalvelun.</p>

		<p>Alla on esimerkki HTML-sivusta, jossa Twitter Bootstrap on otettu käyttöön. Sivulla on lisäksi määritelty <code>body</code>-elementin luokaksi (class) "container", mikä tekee sivusta päätelaitteen leveyteen reagoivan. Elementillä <code>table</code> oleva luokka "table" lisää elementtiin tyylittelyn. Erilaisiin Twitter Bootstrapin tyyleihin voi tutustua tarkemmin <a href="http://getbootstrap.com/css/" target="_blank">täällä</a>.</p>

<pre class="sh_xml">
&lt;!DOCTYPE html&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"&gt;
    &lt;head&gt;
        &lt;title&gt;Blank&lt;/title&gt;
        &lt;link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css"/&gt;
        &lt;link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css"/&gt;
        &lt;script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"&gt;&lt;/script&gt;
    &lt;/head&gt;

    &lt;body class="container"&gt;

        &lt;table class="table"&gt;
            &lt;tr&gt;
                &lt;th&gt;An&lt;/th&gt;
                &lt;th&gt;important&lt;/th&gt;
                &lt;th&gt;header&lt;/th&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;More&lt;/td&gt;
                &lt;td&gt;important&lt;/td&gt;
                &lt;td&gt;text&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;More&lt;/td&gt;
                &lt;td&gt;important&lt;/td&gt;
                &lt;td&gt;text&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;More&lt;/td&gt;
                &lt;td&gt;important&lt;/td&gt;
                &lt;td&gt;text&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;More&lt;/td&gt;
                &lt;td&gt;important&lt;/td&gt;
                &lt;td&gt;text&lt;/td&gt;
            &lt;/tr&gt;
        &lt;/table&gt;

    &lt;/body&gt;
&lt;/html&gt;
</pre>

		<p></p>

		<div class="tehtavat">
		  <div class="tehtava" id="t-hellocss">
		    
		    <header>
		      <h1>
                        <a data-toggle="collapse" class="collapsed" href="#t-hellocss">
                          Hello CSS
                        </a>
                      </h1>
                    </header>

                    <div id="t-hellocss" class="collapse">

		      <p>Tässä tehtävässä tavoitteena on lähinnä kokeilla sovelluksessa olevaa sivua ilman tyylitiedostoja sekä tyylitiedostojen kanssa. Käynnistä palvelin, ja katso miltä juuripolussa toimiva sovellus näyttää.</p>

		      <p>Sammuta tämän jälkeen palvelin ja muokkaa sovellukseen liittyvää <code>index.html</code>-tiedostoa siten, että poistat kommenttimerkit <code>head</code>-elementissä olevien Twitter Bootstrap -kirjaston linkkien ympäriltä. Käynnistä tämän jälkeen palvelin uudestaan, ja katso miltä sivu tämän jälkeen näyttää. Oleellista tässä on se, että sivun ulkoasun muuttamiseen tarvittiin käytännössä vain tyylitiedostojen lisääminen.</p>

		      <p>Tehtävässä ei ole testejä -- voit palauttaa sen kun olet kokeillut ylläolevaa muutosta.</p>

                    </div>
                  </div>
                </div>


		<h2>Tiedon tallentaminen</h2>

		<p>Sovelluksemme -- vaikka huikeita ovatkin -- ovat melko alkeellisia, sillä sovelluksissa käsiteltävää tietoa ei tallenneta mihinkään. Esimerkiksi lomakkeen avulla sovellukselle lähetettävä data katoaa kun sovellus käynnistetään uudestaan. Tämä ei ole kivaa.</p>

		<p>Web-sovelluksissa hyödynnetään tyypillisesti sovelluksesta erillisiä tietokantaohjelmistoja, joihin tehdään kyselyjä tarvittaessa. Tutustutaan tässä pikaisesti erääseen verkossa toimivaan tietokantatoiminnallisuutta tarjoavaan palveluun, <a href="https://www.firebase.com/" target="_blank">Firebase</a>en. Firebase tarjoaa sovelluskehittäjille ilmaisen paikan tiedon tallentamiseen sovelluksen kehitysvaiheessa. Firebasen oleelliset kirjastot saa projektin käyttöön kun lisää <code>pom.xml</code> -tiedostoon seuraavan riippuvuuden.</p>

<pre class="sh_xml">
&lt;dependency&gt;
    &lt;groupId&gt;com.firebase&lt;/groupId&gt;
    &lt;artifactId&gt;firebase-client-jvm&lt;/artifactId&gt;
    &lt;version&gt;2.4.0&lt;/version&gt;
&lt;/dependency&gt;
</pre>

		<p>Firebaseen tallennettavat resurssit liittyvät aina tiettyyn osoitteeseen sekä osoitteen alla olevaan polkuun. Kurssin johdanto-osion viimeisessä tehtävässä on valmiiksi toteutettuna luokka, jonka avulla Firebaseen voi tehdä kyselyitä -- hauskaa tutustumista!</p>

		<p></p>

		<div class="tehtavat">
		  <div class="tehtava" id="t-hellofirebase">
		    
		    <header>
		      <h1>
                        <a data-toggle="collapse" class="collapsed" href="#t-hellofirebase">
                          Hello Firebase
                        </a>
                      </h1>
                    </header>

                    <div id="t-hellofirebase" class="collapse">

		      <p>Tässä tehtävässä on valmiiksi toteutettuna esineiden tallentaminen ja noutaminen Firebase-palvelusta. Tutustu ensin sovelluksen toimintaan, ja kokeile tiedon hakemista ja tallentamista. Huomaat myös, että tieto ei katoa, vaikka käynnistät palvelinohjelmiston uudestaan.</p>

		      <p>Toteuta tehtävässä toiminnallisuus esineiden poistamiseen ja muokkaamiseen. Poistamisen tulee poistaa esine Firebase-palvelusta (luokassa FirebaseService on valmis toiminnallisuus tähän), ja muokkaamisen tulee avata uusi sivu, jossa esineen nimeä voi muuttaa. Voit tehdä konkreettisen muokkaustoiminnallisuuden vaikkapa siten, että poistat vanhan esineen muokkauksen yhteydessä, ja lisäät uuden esineen vanhaan esineeseen liittyvillä muokatuilla tiedoilla.</p>

		      <p>Tehtävässä ei ole testejä, ja palauttaessasi tehtävän palvelimelle kerrot tehneesi sen valmiiksi. Testit on jätetty tästä pois, jotta voit luoda oman Firebase-palvelun, ja käyttää myös sitä.</p>

                    </div>
                  </div>
                </div>





		

        </article>

        <footer>
            <p>
                <a id="license" rel="license" href="http://creativecommons.org/licenses/by-nc-sa/2.0/"><img alt="Creative Commons License" style="border-width:0; float:left; padding:15px" src="http://i.creativecommons.org/l/by-nc-sa/2.0/88x31.png" /></a>
                <small>T&auml;m&auml; materiaali on lisensoitu Creative Commons BY-NC-SA-lisenssill&auml;, joten voit k&auml;ytt&auml;&auml; ja levitt&auml;&auml; sit&auml; vapaasti, kunhan alkuper&auml;isten tekij&ouml;iden nimi&auml; ei poisteta. Jos teet muutoksia materiaaliin ja haluat levitt&auml;&auml; muunneltua versiota, se t&auml;ytyy lisensoida samalla lisenssill&auml;. Materiaalien k&auml;ytt&ouml; kaupalliseen tarkoitukseen on ilman erillist&auml; lupaa kielletty. Tekij&auml;(t): <a href="http://www.cs.helsinki.fi/en/people/avihavai" target="_blank">Arto Vihavainen</a> sekä <a href="http://www.cs.helsinki.fi/en/rage" target="_blank">Agile Education Research</a> -tutkimusryhm&auml;.
            </p>
        </footer>

        <div class="hidden">
            <p>the end.</p>
        </div>


        <script src="js/libs/jquery/jquery.js"></script>
        <script src="js/libs/jqueryui/jquery-ui.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
        <script src="js/libs/syntaxhighlight/sh_main.min.js"></script>

        <script src="js/libs/chartist.min.js"></script>
        <script src="js/libs/visibility.core.js"></script>
        <script src="js/libs/visibility.timers.js"></script>
        <script src="js/libs/visibility.fallback.js"></script>
        <script src="js/js-logger.js"></script>
        <script src="js/verticalfloat.js"></script>
        <script src="js/pheromones.js"></script>
        <script src="js/wepa.js"></script>


    </body>
</html>
